# Learnhub

## Getting Started with Docker

The Learnhub application is containerized using Docker. You can spin up the entire environment, including the database and backend, with one command.

### Requirements

- [Docker](https://www.docker.com/)
- [Docker Compose](https://docs.docker.com/compose/)

### Start the application

- You can use the `start-docker.sh`, `start-podman.sh` files based on if you are on linux and want to use docker or podman to start the application.__
- Or you can use the `start.bat` if you are on windows.

This will close all remaining docker container from the last time this application was started.

ALternatively you can just use the terminal and use following command to start the application:

```bash
docker-compose up --build
```

Both options will:

    Start a MySQL 8 container with the database learnhub-db

    Build and start the Quarkus backend application

    Mount the mock-data folder into the container for CSV import

Once running, the backend will be available at:

```txt
http://localhost:8080
```

## Swagger UI Usage

Learnhub includes Swagger UI to interactively explore and test the REST API.

### How to access Swagger UI

1. Start the application.  
2. Open your browser and go to:

```txt
http://localhost:8080/q/swagger-ui/
```


3. You will see the Swagger UI interface listing all available API endpoints.  
4. You can expand any endpoint to see details, request parameters, response schemas, and even execute requests directly from the browser.

### Notes

- The OpenAPI documentation is automatically generated from your code annotations.  
- If you make changes to the API, the Swagger UI will reflect those changes on restart.

---

## Mock Data CSV File Format

To import mock data into the application, you can place CSV files in the `mock-data` folder. The application reads these files on startup and imports the data accordingly.

### CSV file naming

- The file name should match the entity name, e.g.:  
  - `subject.csv`  
  - `user.csv`  
  - `topic_content.csv`

### CSV file structure

- The first row **must** contain the column headers.  
- Each following row represents one entity record.  
- The columns must correspond to the entity's attributes in the **java class**, e.g., for `subject.csv`:

| name        | description        | imgId  |
|-------------|--------------------|--------|
| Mathematics | Math basics intro  | 10     |
| Physics     | Physics concepts   | 11     |

- For foreign key fields should be named like the attribute name in the **java class** followed by *Id* immediately after, just like `imgId`. The value should reference a related entity defined in another csv file by its ID.  
- Dates should be formatted as `YYYY-MM-DDTHH:MM:SS`.
- If there is a ManyToMany relation your csv attribute should have the **java class attribute name** just as before but instead of *Id* followed by *Ids*. The Value of these ids should be the ids of the referenced entities in another csv file separated by `;`. e.g. for `exam.csv`:

| timeLimit  | startedAt            | ... | topicPoolsIds |
|------------|----------------------|-----|---------------|
| 30         | 2025-07-08T09:00:00  | ... | "1;2"         |
| 45         | 2025-07-08T13:14:00  | ... | "3;5"         |

### Example CSV (`user.csv`)

| name      | email             | isTeacher  | isAdmin  | profilePictureId   |
|-----------|-------------------|------------|----------|--------------------|
| Alice Doe | alice@example.com | true       | false    | 5                  |
| Bob Smith | bob@example.com   | false      | true     | 6                  |

### Important Notes

- Ids are generated by the system, so in each csv file the first entry has the id 1, the second the id 2 and so on, for each csv file individually.__
- Errors during import will be logged if they don't cause immediate crashes on startup.
